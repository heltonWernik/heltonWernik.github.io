---
layout: post
title: File Upload Vulnerabilities - Usando Burp Suite
date: '2018-03-29T07:02:00.001-07:00'
author: Israel Helton Wernik
tags: 
modified_time: '2018-03-29T07:03:14.619-07:00'
thumbnail: https://2.bp.blogspot.com/-4yXLuYfyGfA/WrzxuM2EabI/AAAAAAAAAGo/c80FPx9uRyEUCNUTZK7Nzg4seaNQBsfiwCLcBGAs/s72-c/evil%2Bfile.png
blogger_id: tag:blogger.com,1999:blog-5213248075369348047.post-5438126552446632934
blogger_orig_url: https://cibersegurancawernik.blogspot.com/2018/03/file-upload-vulnerabilities.html
---

<div class="separator" style="clear: both; text-align: center;"><a href="https://2.bp.blogspot.com/-4yXLuYfyGfA/WrzxuM2EabI/AAAAAAAAAGo/c80FPx9uRyEUCNUTZK7Nzg4seaNQBsfiwCLcBGAs/s1600/evil%2Bfile.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="189" data-original-width="168" src="https://2.bp.blogspot.com/-4yXLuYfyGfA/WrzxuM2EabI/AAAAAAAAAGo/c80FPx9uRyEUCNUTZK7Nzg4seaNQBsfiwCLcBGAs/s1600/evil%2Bfile.png" /></a></div><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="Apple-interchange-newline" /></span></div><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">Vamos aprender como enviar um arquivo malicioso para um server ou computador e ter controle no site. </span></div><br /><a name='more'></a><br /><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">Podemos criar com Veil-Evasion ou Metasploit, ou ter seu próprio PHP Shell.</span></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">Vamos conhecer uma ferramenta chamada weevly para criar um payload ou shell</span></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 16pt; margin-top: 0pt;"><span style="color: #666666; font-family: &quot;arial&quot;; font-size: 15pt; vertical-align: baseline; white-space: pre-wrap;">Criando o shell em PHP:</span></div><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">no terminal do kali:</span></div><br /><div dir="ltr" style="margin-left: 0pt;"><table style="border-collapse: collapse; border: none;"><colgroup></colgroup><tbody><tr style="height: 0pt;"><td style="background-color: #333333; padding: 5pt; vertical-align: top;"><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">weevly generate 123456 /root/shell.php</span></div></td></tr></tbody></table></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">123456 - senha para acessar aquele payload e controlar o site</span></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><img height="72" src="https://lh4.googleusercontent.com/lwsKa2kujR6UAK68xaspB_HFd_U8OY5q1XqvFLzHJdbwKKuLF7XcCuYHzyaNqQeAjaK9mqZu2vUiLq1qj9FW4J8qARsMmRt_AHT3kxebHxNrEwb0QF8Hlwu3wlTLrOXSDXyCzsIv" style="border: none; transform: rotate(0rad);" width="602" /></span></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 16pt; margin-top: 0pt;"><span style="color: #666666; font-family: &quot;arial&quot;; font-size: 15pt; vertical-align: baseline; white-space: pre-wrap;">Iniciando o BURP Proxy</span></div><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">Para enviar o nosso shell precisamos de um proxy para manipular os dados do POST.</span></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">para isso iremos usar o BURP Proxy</span></div><br /><ul style="margin-bottom: 0pt; margin-top: 0pt;"><li dir="ltr" style="font-family: Arial; font-size: 11pt; font-variant-east-asian: normal; font-variant-numeric: normal; list-style-type: disc; vertical-align: baseline; white-space: pre;"><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-size: 11pt; font-variant-east-asian: normal; font-variant-numeric: normal; vertical-align: baseline; white-space: pre-wrap;">Abrir o BURP</span></div></li><li dir="ltr" style="font-family: Arial; font-size: 11pt; font-variant-east-asian: normal; font-variant-numeric: normal; list-style-type: disc; vertical-align: baseline; white-space: pre;"><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-size: 11pt; font-variant-east-asian: normal; font-variant-numeric: normal; font-weight: 700; vertical-align: baseline; white-space: pre-wrap;">proxy - options</span><span style="font-size: 11pt; font-variant-east-asian: normal; font-variant-numeric: normal; vertical-align: baseline; white-space: pre-wrap;"> ver a porta em que está rodando, no nosso caso porta 8080</span></div></li></ul><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><img height="221" src="https://lh3.googleusercontent.com/Hrl0N0oaoRFzt88Ej1scOZecWeiqdJrerQFsOGEeA-NZZN1jRFeY0jnqhy83uL0Z68u-SzpxIkLK91nVAQ-39PY7Dx5veD9ELeAsyvw37N8f-nFG2YjfEreybZ9NGFgLV4me0EdU" style="border: none; transform: rotate(0rad);" width="564" /></span></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">Agora devemos configurar o browser para enviar todos os requests ao burp proxy</span></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">No Firefox do Kali:</span></div><br /><ul style="margin-bottom: 0pt; margin-top: 0pt;"><li dir="ltr" style="font-family: Arial; font-size: 11pt; font-variant-east-asian: normal; font-variant-numeric: normal; list-style-type: disc; vertical-align: baseline; white-space: pre;"><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-size: 11pt; font-variant-east-asian: normal; font-variant-numeric: normal; font-weight: 700; vertical-align: baseline; white-space: pre-wrap;">preferences - advance - network - settings</span><span style="font-size: 11pt; font-variant-east-asian: normal; font-variant-numeric: normal; vertical-align: baseline; white-space: pre-wrap;"> - check manual proxy configuration </span></div></li></ul><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">colocar na porta 8080 - ok</span></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><img height="445" src="https://lh6.googleusercontent.com/tsfuhwsebxV1qZQcXerQatQjK-vDfoVNdr7WFroaIy1TXStYB4TH8BqkRjKZhYX1341-eCBihetL4AAU_U4uk0_AVj2ObevEWtiItYEoQ3cZ7kU7jF4oLo56n9AtgPfYaGfzCwMF" style="border: none; transform: rotate(0rad);" width="480" /></span></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">Agora no burp na janela intercept podemos interceptar todo o tráfego no browser:</span></div><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">podemos modificar e depois clicando no forward é enviado.</span></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><img height="136" src="https://lh5.googleusercontent.com/fLjGQ2Q0f-SiFsElernOeEGJtx1BQDh2PXU6FgKmezADS66ge5p4pTBVGRA5G920VHYt4Wx4wS8LKus1XHGl_ZOohtwAXO039VgLeq2on1nruLdBX7CQd7ta107q_k3gAgD-cvAW" style="border: none; transform: rotate(0rad);" width="602" /></span></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">Lembrar de quando desligar o BURP mudar a configuração do firefox para no proxy</span></div><br /><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 16pt; margin-top: 0pt;"><span style="color: #666666; font-family: &quot;arial&quot;; font-size: 15pt; vertical-align: baseline; white-space: pre-wrap;">Manipulando os Requests do site para enviar nosso payload </span></div><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">Iremos usar o site dvwa no modo mais seguro </span></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><img height="137" src="https://lh4.googleusercontent.com/EI2sbN_yBtEJqWdsgM-IyE5RbJ3GDRWYRNVSdVJA36LVTR8-PrjvAJ0_n4h5xWxCVTmuqFug7hc_pDxub9O8XIWIo4XHZrbfsZGcCZuGjqd-P61r8OLmeB9PQDay__djM8nQYD7g" style="border: none; transform: rotate(0rad);" width="246" /></span></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">Fazemos upload de nosso arquivo malicioso</span></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">Mudamos o arquivo shell.php para shell.jpg e enviamos</span></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><img height="275" src="https://lh4.googleusercontent.com/Q4OL3ZP2qRYIV_UnHoryqdaRI-iCJ2lsifpIwsclrl3sPTjPklTVHaOyoqVIaV8xztSMqLZBCP_ZH6LjqrzPk0ctjcYR_fYYaJuNX68hG0_KfpcRESp7DD4LdAVh_e1NZVPLPrCx" style="border: none; transform: rotate(0rad);" width="602" /></span></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">Na tela da direita vemos o request interceptado e agora podemos manipular ele, precisamos que o arquivo seja php para poder rodar, mas o sistema não deixa subir um arquivo .php, por isso iremos mudar ele para shell.php.jpg</span></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><img height="45" src="https://lh6.googleusercontent.com/ykRMUEzUDJuqNO-mdyffGZ69D5fgzLNdjnY8Scm2--EFcn1ncDoUbb_yBZuOkAIlwRckQnP9KDxfQ4kFqtK-JfGlEB7KYZ5W2CVZDY4S0JnDaqtc6s9wOTDrKbazIVmm8vqcm5D1" style="border: none; transform: rotate(0rad);" width="389" /></span></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">nesse caso mudamos para shell3.php.jpg pois já enviamos outros antes para testar</span></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">E agora clicamos no Forward do Burp para enviar e…</span></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><img height="88" src="https://lh6.googleusercontent.com/aNv6ewLoKS7ElhlEQhFiB8DK1sY1Mxx8ui8QaR9H0ACqnhFGwN5wuMHd-NYnUrbJD7D4Do_rxPfTPeehiDemLbThl_qB5QN4psewqtHAKcTZPLP2Ys44QyCea_Y8GrkD68ObaRgl" style="border: none; transform: rotate(0rad);" width="414" /></span></div><div dir="ltr" style="line-height: 1.38; margin-bottom: 16pt; margin-top: 0pt;"><span style="color: #666666; font-family: &quot;arial&quot;; font-size: 15pt; vertical-align: baseline; white-space: pre-wrap;">Acessando o Shell</span></div><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">Basta colocar o comando weevly + &nbsp;endereço para qual o arquivo foi enviado no server + senha criada</span></div><br /><div dir="ltr" style="margin-left: 0pt;"><table style="border-collapse: collapse; border: none;"><colgroup></colgroup><tbody><tr style="height: 0pt;"><td style="background-color: #333333; padding: 5pt; vertical-align: top;"><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">weevly </span><a href="about:blank" style="text-decoration-line: none;"><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">http://10/20/14/204/dvwa/hackable/uploads/shell.php</span></a><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"> 12345</span></div></td></tr></tbody></table></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">Pronto agora com qualquer comando linux podemos controlar todo o site</span></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><img height="287" src="https://lh3.googleusercontent.com/MNhbTWf2JQuPefpRwffCVVt2s53Hp5m0YhfwVXsjZ0p5g1-WRQIRDc6le4od2GaAR2aL1sAxnl1eTa2FaNIIYYoRmfreR8mZhdoUkWDsduEu0JZk0ghDm2wdd_NrRQlYfFZfSGO6" style="border: none; transform: rotate(0rad);" width="602" /></span></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">Pode-se digitar help para ver todas as opções:</span></div><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><img height="341" src="https://lh6.googleusercontent.com/RS3O7wkXkRL7L3ltxOlPgm5lh26njt3xVrlz8mHDYYdmq9X11e-HSUtuzojm3xdy-z0Fxk-izMJh6SlK9PusH_gE7V3Xm3uoGpfsZTZAkaHppWgUSQLffJFucIv2mz3iKWc8U4qx" style="border: none; transform: rotate(0rad);" width="602" /></span></div><br /><h1 dir="ltr" style="line-height: 1.38; margin-bottom: 6pt; margin-top: 20pt;"><span style="font-family: &quot;arial&quot;; font-size: 20pt; font-weight: 400; vertical-align: baseline; white-space: pre-wrap;">Security - Como evitar esse tipo de ataque</span></h1><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">No código devemos ter uma segurança e:</span></div><ul style="margin-bottom: 0pt; margin-top: 0pt;"><li dir="ltr" style="font-family: Arial; font-size: 11pt; font-variant-east-asian: normal; font-variant-numeric: normal; list-style-type: disc; vertical-align: baseline; white-space: pre;"><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-size: 11pt; font-variant-east-asian: normal; font-variant-numeric: normal; vertical-align: baseline; white-space: pre-wrap;">nunca deixar o usuário fazer upload de um executável (php.exe ...etc)</span></div></li><li dir="ltr" style="font-family: Arial; font-size: 11pt; font-variant-east-asian: normal; font-variant-numeric: normal; list-style-type: disc; vertical-align: baseline; white-space: pre;"><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-size: 11pt; font-variant-east-asian: normal; font-variant-numeric: normal; vertical-align: baseline; white-space: pre-wrap;">verifique o tipo do arquivo e a extenção</span></div></li><li dir="ltr" style="font-family: Arial; font-size: 11pt; font-variant-east-asian: normal; font-variant-numeric: normal; list-style-type: disc; vertical-align: baseline; white-space: pre;"><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-size: 11pt; font-variant-east-asian: normal; font-variant-numeric: normal; vertical-align: baseline; white-space: pre-wrap;">Análise o arquivo, recrie-o, renomea-o. </span></div></li><li dir="ltr" style="font-family: Arial; font-size: 11pt; font-variant-east-asian: normal; font-variant-numeric: normal; list-style-type: disc; vertical-align: baseline; white-space: pre;"><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-size: 11pt; font-variant-east-asian: normal; font-variant-numeric: normal; vertical-align: baseline; white-space: pre-wrap;">Destruir a imagem original </span></div></li></ul><br /><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="font-family: &quot;arial&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">Veja um exemplo de como verificar o arquivo, recriar outro e renomea em PHPr:</span></div><br /><div dir="ltr" style="margin-left: 0pt;"><table style="border-collapse: collapse; border: none;"><colgroup></colgroup><tbody><tr style="height: 0pt;"><td style="background-color: #333333; padding: 5pt; vertical-align: top;"><div dir="ltr" style="line-height: 1.38; margin-bottom: 0pt; margin-top: 0pt;"><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: #888888; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">// Is it an image?</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: #fcc28c; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">if</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">( ( strtolower( $uploaded_ext ) == </span><span style="color: #a2fca2; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">'jpg'</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"> || strtolower( $uploaded_ext ) == </span><span style="color: #a2fca2; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">'jpeg'</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"> || strtolower( $uploaded_ext ) == </span><span style="color: #a2fca2; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">'png'</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"> ) &amp;&amp;</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">( $uploaded_size &lt; </span><span style="color: #d36363; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">100000</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"> ) &amp;&amp;</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">( $uploaded_type == </span><span style="color: #a2fca2; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">'image/jpeg'</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"> || $uploaded_type == </span><span style="color: #a2fca2; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">'image/png'</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"> ) &amp;&amp;</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">getimagesize( $uploaded_tmp ) ) {</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: #888888; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">// Strip any metadata, by re-encoding image (Note, using php-Imagick is recommended over php-GD)</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: #fcc28c; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">if</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">( $uploaded_type == </span><span style="color: #a2fca2; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">'image/jpeg'</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"> ) {</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">$img = imagecreatefromjpeg( $uploaded_tmp );</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">imagejpeg( $img, $temp_file, </span><span style="color: #d36363; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">100</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">);</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">}</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: #fcc28c; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">else</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"> {</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">$img = imagecreatefrompng( $uploaded_tmp );</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">imagepng( $img, $temp_file, </span><span style="color: #d36363; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">9</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">);</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">}</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">imagedestroy( $img );</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: #888888; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">// Can we move the file to the web root from the temp folder?</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: #fcc28c; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">if</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">( rename( $temp_file, ( getcwd() . DIRECTORY_SEPARATOR . $target_path . $target_file ) ) ) {</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: #888888; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">// Yes!</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">$html .= </span><span style="color: #a2fca2; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">"&lt;pre&gt;&lt;a href='${target_path}${target_file}'&gt;${target_file}&lt;/a&gt; succesfully uploaded!&lt;/pre&gt;"</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">;</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">}</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: #fcc28c; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">else</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"> {</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: #888888; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">// No</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">$html .= </span><span style="color: #a2fca2; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">'&lt;pre&gt;Your image was not uploaded.&lt;/pre&gt;'</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">;</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">}</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: #888888; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">// Delete any temp files</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: #fcc28c; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">if</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">( file_exists( $temp_file ) )</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">unlink( $temp_file );</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">}</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: #fcc28c; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">else</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"> {</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: #888888; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">// Invalid file</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">$html .= </span><span style="color: #a2fca2; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">'&lt;pre&gt;Your image was not uploaded. We can only accept JPEG or PNG images.&lt;/pre&gt;'</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">;</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><span class="Apple-tab-span" style="white-space: pre;"> </span></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">}</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;">}</span><span style="color: white; font-family: &quot;consolas&quot;; font-size: 11pt; vertical-align: baseline; white-space: pre-wrap;"><br class="kix-line-break" /></span></div></td></tr></tbody></table></div><br />